// Enable camera + mic
await room.localParticipant.enableCameraAndMicrophone();

// WAIT for the local camera track
const localVideoTrack = Array.from(
  room.localParticipant.videoTracks.values()
)[0]?.track;

if (localVideoTrack) {
  const videoEl = localVideoTrack.attach();
  videoEl.autoplay = true;
  videoEl.muted = true; // REQUIRED on mobile
  videoEl.playsInline = true;
  document.getElementById("videos").appendChild(videoEl);
}

// Handle remote participants
room.on("trackSubscribed", (track) => {
  if (track.kind === "video") {
    const el = track.attach();
    el.autoplay = true;
    el.playsInline = true;
    document.getElementById("videos").appendChild(el);
  }
});
